"use strict";
/*!
 *
 * GBZ80 to Items - script.min.js
 * Version 2.1
 * Build date : ??/??/????
 *
 * Scripté par ISSOtm
 * Tous droits réservés à ISSOtm (@ecpensiveLife) et PRAMA Initiative (@PramaTheTrust)
 *
 * Toute ou partie de ce scipt ne peut être recopié qu'avec l'autorisation expresse de ISSOtm et de PRAMA Initiative.
 * De plus, ces deux noms devront être mentionnés dans l'en-tête du script dans lequel elles se trouveront.
 *
 * Remerciements aux équipes de jQuery (http://jquery.org) et de Bootstrap (http://getbootstrap.com) pour leur fantastique travail.
 * Merci à l'auteur des Glyphicons Halflings pour avoir mis gratuitement à disposition de Boostrap certaines de ses créations.
 * Merci enfin à PRAMA Initiative pour avoir hébergé ce script !
 *
 */
;if("undefined"===typeof $){if("undefined"===typeof jQuery){throw new Error("jQuery est requis !!")}else{var $=jQuery}}var Utilities={typeOf:function(b){return typeof b==="number"&&isNaN(b)?"NaN":Array.isArray(b)?"array":b===null?"null":typeof b},replaceIfType:function(d,c,e){e=e||Utilities.typeOf(c);return(Utilities.typeOf(e)==="array"?e.indexOf(Utilities.typeOf(d)):e===Utilities.typeOf(d))?d:c},isNumber:function(b){function a(c){return typeof c==="number"&&!isNaN(c)}return a(b)||a(parseInt(b))},isInt:function(a){return Utilities.isNumber(a)&&a>=0&&Math.floor(a)===a}},options=Utilities.replaceIfType(options,{}),defaultOptions={debug:false,useStrict:false},i;for(i in defaultOptions){options[i]=Utilities.replaceIfType(options[i],defaultOptions[i])}var Kernel={debug:{log:function(a){if(options.debug){console.log(a)}},info:function(a){if(options.debug){console.info(a)}},warn:function(a){if(options.debug){console.warn(a)}},raise:function(a){swal({title:"Oh zut !",text:a,type:"error",allowEscapeKey:true,allowOutsideClick:true,confirmButtonClass:"btn-danger"});console.exception(a);if(options.debug){console.log("Stack trace :");console.trace();console.groupEnd()}throw new Error(a)},strictOnlyRaise:function(a){if(options.useStrict){warn("STRICT-ONLY EXCEPTION RAISED !");raise(a)}},group:function(a){if(options.debug){console.group(a)}},groupEnd:function(a){if(options.debug){console.groupEnd()}}},hexCharList:["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"]};Kernel.debug.group("Chargement en cours...");Kernel.debug.info("Le kernel a été chargé.");function decToHex(b,c){if(!Utilities.isInt(b)){Kernel.debug.raise("input : Nombre attendu, "+b+" obtenu.")}c=c||1;if(!Utilities.isInt(c)){Kernel.debug.raise("minChars : Nombre attendu, "+c+" obtenu.")}var a="";while(b!==0){a=Kernel.hexCharList[b%16]+a;b=Math.floor(b/16);c--}if(c>0){a="0".repeat(c)+a}return a}function hexToDec(b){if(typeof b!=="string"){Kernel.debug.raise("input : String expected.")}if(!/^[0-9A-F]+$/.test(b)){Kernel.debug.raise("input : heaxdecimal parsing failed.")}var a=0;while(b!==""){a=a*16+Kernel.hexCharList.indexOf(b.charAt(0));b=b.slice(1)}return a}function binToDec(b){if(typeof b!=="string"){Kernel.debug.raise("input : String expected.")}var a=0;while(b!==""){a*=2;if(b.charAt(0)==="1"){a++}else{if(b.charAt(0)!=="0"){Kernel.debug.raise("input : binary parsing failed.")}}b=b.slice(1)}return a}Kernel.debug.info("Fonctions de conversion de bases chargées !");Kernel.debug.info("Constructeurs de classe chargés !");var ptrConversion={parseGBptr:function(a){return/^[0-9A-F]{1,2}:[0-9A-F]{4}$/.test(a)},parseROMofs:function(a){return/^[0-9A-F]{1,6}$/.test(a)},init:function(){$("#parseGBptr").click(function(){var a=$("#GBptr").val().toUpperCase();if(ptrConversion.parseGBptr(a)){a=a.split(":");a=[hexToDec(a[0])-1,hexToDec(a[1])];if(a[0]<127){if(a[1]<32768&&a[1]>16383){$("#ROMofs").val(decToHex(a[0]*16384+a[1],5))}else{Kernel.debug.raise("Le pointeur être compris entre 4000 et 7FFF !")}}else{Kernel.debug.raise("L'ID de banque ne doit pas valoir 7F !")}}else{Kernel.debug.raise("Veuillez entrer un pointeur compris entre 01-4000 et 7F-7FFF !")}});$("#parseROMofs").click(function(){var a=$("#ROMofs").val().toUpperCase();if(ptrConversion.parseROMofs(a)){a=hexToDec(a);if(a<2097152){a=[Math.floor(a/16384),a%16384+16384];$("#GBptr").val(decToHex(a[0])+":"+decToHex(a[1]))}else{Kernel.debug.raise("L'offset ne doit pas dépasser 1FFFFF !")}}})}},ptrLocation={minimums:[256,16384,32768,38912,39936,40960,49152,57344,65024,65184,65280,65408,65535],init:function(){$("#locatePtr").click(function(){var b=$("#locPtr").val().toUpperCase(),a=0;$("#loc td").removeClass("bg-info");if(/^[0-9A-F]{1,4}$/.test(b)){while(hexToDec(b)>=ptrLocation.minimums[a]){a++}setTimeout(function(){$("#loc"+a+" td").addClass("bg-info")},500)}else{Kernel.debug.raise("Veuillez entrer un pointeur GB valide (0000-FFFF) !")}})}},mapToBank={banques:["06","06","06","06","11","06","06","06","07","14","14","01","07","15","15","15","15","16","12","16","15","16","16","16","15","15","16","16","15","16","15","14","15","14","14","14","14","12","17","06","07","11","07","07","07","1D","07","17","07","17","17","18","17","17","17","07","1D","07","17","12","14","12","07","07","17","17","07","17","12","07","07","17","15","07","17","17","07","17","17","07","07","12","11","07","12","07","12","12","07","17","16","17","17","07","07","18","18","11","18","18","18","18","18","18","18","1D","1D","1D","17","1D","1D","1D","1D","16","1D","1D","1D","1D","16","18","1D","18","18","15","12","12","12","12","12","12","12","12","07","12","12","12","12","12","12","12","12","17","18","18","18","18","18","18","18","07","17","07","07","1D","1D","1D","1D","1D","1D","11","11","11","11","15","15","11","1D","1D","1D","1D","1D","1D","1D","1D","06","1D","17","17","17","07","17","17","17","07","12","12","12","12","07","15","12","12","11","07","14","12","06","18","11","11","11","11","11","11","01","01","01","16","16","06","06","06","14","15","14","14","14","11","11","12","11","11","12","11","11","11","11","11","1D","07","1D","01","11","17","16","18","11","11","11","13","13","11","11","11","11","1D","1D","1D","3E","90","E0","B0","E0","4A","AF","E0"],pointeurs:["42A1","4357","4554","474E","4000","4998","4000","4BA7","4000","491E","49A4","49A4","40C3","4000","41E6","4390","4581","4000","4000","412D","4686","42D4","44BE","466D","480C","4999","492C","4ADA","4B20","4C38","4E78","40F1","4FFF","4000","433F","4682","479B","415C","40A4","5B34","4B02","4251","5462","5540","557D","48E4","5EA7","556F","5EE4","55BC","5644","5101","40EB","430B","437B","55E7","4CE9","563C","4578","59BB","5A39","5CFE","5679","56EA","4636","46A4","5730","4880","52C2","5679","5F2A","5691","6243","6034","56D7","56D7","60F7","5714","5751","61BE","6280","53AD","44D0","62BD","53FF","65B1","5447","54F7","6761","497A","5B64","49CC","4A11","5AF3","5B49","5259","5393","4926","5622","56A2","57A7","5889","596A","5B3F","5D49","62A2","62A2","62A2","59F2","62A2","62A2","62A2","62A2","62A2","62A2","62A2","62A2","62A2","6492","5F1A","5F53","5F3E","4F7A","60E9","4219","434A","43C9","45F4","4688","472E","4784","485F","5D31","48AC","48FE","4BAF","505C","50E3","5144","5201","525C","48C5","4420","44E6","46C0","47EA","4926","4AE3","4CF9","589F","4917","59A5","5D7F","5055","50A0","50F2","520A","547A","571C","6309","6445","6581","678D","6064","6170","42A3","5783","5BC2","5C57","5CBD","5D67","5E62","5EB4","5EB4","5C54","5EF9","4C5D","4D49","4FF9","5DD4","53F1","5436","551D","5E33","55F5","563D","56B1","57FE","65EF","6473","5869","5968","47DD","667A","5794","5553","5C0B","5F62","4974","4BBE","4E1B","5219","5451","5704","5704","5704","5704","5CE5","5F4F","5D04","5F30","61A2","5B58","64F8","5FCF","61E5","63B0","585F","599F","61A8","5BA6","5CE1","630A","5D1E","5D69","5DB4","5DFF","5EE4","4D48","5A09","4E45","56B1","5FDF","57A3","612D","60EE","57B4","5CE5","5CE5","7D04","7D71","5CE5","5CE5","5CE5","5CE5","61B1","630C","6463","1C06","7F21","C348","35F3","FF3E","6BEA","CDCD","1241"],init:function(){$("#mapToBank").click(function(){var a=$("#map").val().toUpperCase();if(/^[0-9A-F]{1,2}$/.test(a)){a=hexToDec(a);$("#bank").text(mapToBank.banques[a]);$("#pointer").text(mapToBank.pointeurs[a]);$("#rom").text(decToHex((hexToDec(mapToBank.banques[a])-1)*hexToDec("4000")+hexToDec(mapToBank.pointeurs[a])))}else{Kernel.debug.raise("Veuillez entrer un ID de map (entre 00 et FF) !")}})}},headerGenerator={init:function(){$("#generateHeader").click(function(){var b="",a=0;$("#collapseFour input").each(function(){if(!$(this).is("#header7")){a=$(this).val().toUpperCase();if(/^[0-9A-F]{1,4}/.test(a)&&hexToDec(a)<$(this).attr("data-max")){a=hexToDec(a);b+=" "+($(this).attr("placeholder")==="0000-FFFF"?decToHex(a,4).slice(2)+" "+decToHex(a,2).slice(0,2):decToHex(a,2))}else{Kernel.debug.raise("Veuillez entrer des valeur valides !")}}else{b+=" "+$(this).val()}});$("#collapseFour .panel-primary .panel-body").text(b.slice(1))})}},mapCoGenerator={connexions:{active:[false,false,false,false],data:[]},init:function(){$("#mapCoWizard").on("actionclicked.fu.wizard",function(b,a){if(a.step===5&&a.direction==="next"){var c=0;mapCoGenerator.connexions.active.forEach(function(d){c*=2;if(d){c++}});c=decToHex(c,2);mapCoGenerator.connexions.data.forEach(function(d){c+=" "+d.join(" ")});$("#mapCoOutput").val(c.replace(/ {2,4}/," ").trimRight()).select()}else{if(a.step!==5){mapCoGenerator.connexions.data[a.step-1]=[];mapCoGenerator.connexions.active[a.step-1]=$("#mapCoWizard .step-pane.active .btn").hasClass("active");if(mapCoGenerator.connexions.active[a.step-1]){$("#mapCoWizard .step-pane.active input").each(function(){var d=hexToDec($(this).val().toUpperCase());if(($(this).attr("placeholder")==="0000-FFFF"?/^[0-9A-F]{1,4}$/:/^[0-9A-F]{1,2}$/).test(d)){mapCoGenerator.connexions.data[a.step-1].push($(this).attr("placeholder")==="0000-FFFF"?decToHex(d,4).slice(2)+" "+decToHex(d,2).slice(0,2):decToHex(d,2))}else{$(this).parent().parent().parent().removeClass("has-error has-feedback").children("span").remove();$(this).parent().parent().parent().append('<span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span><span class="sr-only">(erreur)</span>').addClass("has-error has-feedback");Kernel.debug.raise("Veuillez entrer des valeurs valides !")}})}}}});$("#mapCoWizard input").focus(function(){$(this).parent().parent().parent().removeClass("has-error has-feedback").children("span").remove()});$("#mapCoWizard .step-content .btn").click(function(){$(this).toggleClass("btn-danger btn-success").siblings(".control-group").find("input")[$(this).hasClass("active")?"attr":"removeAttr"]("disabled","disabled")}).trigger("click")}},strConverter={conversions:{prefixes:{prefixes:["text","line","para","cont","done"],indexes:["00","4F","51","55","57"]},chars:{chars:[" ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","(",")",":",";","[","]","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","à","è","é","ù","ß","ç","Ö","Ü","ä","ö","ü","ë","ï","â","ô","û","ê","î","'","-","+","?","!",".","*","/",",","0","1","2","3","4","5","6","7","8","9"],indexes:["7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","E0","E3","E4","E6","E7","E8","F1","F3","F4","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"]}},init:function(){$("#strToHex").click(function(){var a=$("#str").val().split("\n"),b="";a.forEach(function(e,c){var d=-1;do{d++;if(d===5){Kernel.debug.raise("Ligne "+(c+1)+" invalide !\nVeuillez entrer un des préfixes suivants \n"+strConverter.conversions.prefixes.prefixes.join(", ")+"\navant le texte !")}}while(!e.startsWith(strConverter.conversions.prefixes.prefixes[d]));b+=" "+strConverter.conversions.prefixes.indexes[d];if(d===4){return}e=e.slice(6);if(!/^[ A-Z():;\[\]a-zàèéùßçÖÜäöüëïâôûî'+?!.*\/,0-9-]+"$/.test(e)){Kernel.debug.raise("Ligne "+(c+1)+" invalide !\nSeuls les caractères suivants sont acceptés :\nABCDEFGHIJKLMNOPQRSTUVWXYZ\nabcdefghijklmnopqrstuvwxyz\nàèéùßçÖÜäöüëïâôûî\n():; []'+-?!.*/,\n0123456789\n\nDe plus, une seule commande de texte par ligne est acceptée !")}while(e!=='"'){d=0;while(strConverter.conversions.chars.chars[d]!==e.charAt(0)){d++}b+=" "+strConverter.conversions.chars.indexes[d];e=e.slice(1)}});$("#hexedStr").text(b)})}};Kernel.debug.info("Toutes les fonctions ont été chargées.");$(window).load(function(){Kernel.debug.info("Le DOM est chargé.");$("form.prevent-submit").submit(function(a){a.preventDefault()});ptrConversion.init();ptrLocation.init();mapToBank.init();headerGenerator.init();mapCoGenerator.init();strConverter.init();Kernel.debug.info("Le script est totalement chargé et initialisé. Bonne utilisation !");Kernel.debug.groupEnd()});
/*!
Si tu comprends ce code, tu auras le droit de manger un bonbon !
___    .-'''-.    ___
\  \  /\ \ \ \\  /  /
 }  \/\ \ \ \ \\/  {
 }  /\ \ \ \ \ /\  {
/__/  \ \ \ \ /  \__\
       '-...-'
*/;